# 仕様書（MVP版）

──────────────────────────────  
## プロジェクト概要  
本プロジェクトは、**Meta Quest** 上で動作する「水資源問題の理解促進」を目的とした **VRシリアスゲーム** です。  
プレイヤーは「井戸から水を汲み、生活に使用する」体験を通して、水資源の有限性や意思決定の影響を学習します。  

Unity 6 を使用し、教育・研究用途に最適化された最小構成（MVP）として開発します。  
既存のUnityアセットを活用することで、開発コストを抑えながらリアルな環境体験を実現します。

──────────────────────────────  
## 環境構成  

**シーン構成**  
- 舞台：農村の屋外空間（井戸・畑・家屋外周）  
- 登場オブジェクト：井戸、バケツ、コップ、畑、建物、地面など  
- 3Dモデル：無料アセットを中心に構築（有料アセット使用時は事前相談）  
- 光源・環境効果：URP（Universal Render Pipeline）軽量設定  

──────────────────────────────  
## 器具容量の定義  

| 器具名 | 最大水量
|:--|:--:|:--|
| バケツ | 80 
| コップ | 5 

──────────────────────────────  
## 各タスク別パラメータ設定（仮定値）

| 行動 | 水量変化 | 水質変化 | 体力変化 |
|:--|:--:|:--:|:--:|
| 井戸から水を汲む | ＋80（バケツ）／＋5（コップ） | ±0（変化なし） | −10 |
| 水を捨てる | −80（バケツ）／−5（コップ） | −10（環境悪化） | −2 |
| 農業を行う（畑に水をまく） | −50（バケツ）／−5（コップ） | −50（使用による大幅な水質低下） | −15 |
| 飲む | −5（バケツ・コップ共通） | ±0（変化なし） | ＋10（※水質80以上時）／−10（80未満時） |

──────────────────────────────  
## パラメータ管理  

ゲームでは以下の3つの主要パラメータを管理します：  

| パラメータ | 範囲 | 説明 |
|:--|:--:|:--|
| 水量（Water Volume） | 0〜100 | 現在保持している水の量。行動に応じて増減。 |
| 水質（Water Quality） | 0〜100 | 水の清潔度。汚染行動で低下、浄水で上昇。 |
| 体力（Stamina） | 0〜100 | プレイヤーの体力。行動で減少、飲用で回復。 |

更新タイミングはリアルタイムではなく、「タスク実行時（イベント発生時）」にのみ反映されます。  

──────────────────────────────  
## パラメータ閾値と定義  

| 項目 | 定義 | 効果 |
|:--|:--|:--|
| 水質80以上 | 安全域（飲用可能） | 飲用時に体力回復 |
| 水質79以下 | 汚染域（飲用リスク） | 飲用時に衛生リスク・体力減少 |

──────────────────────────────  
## スコアリング仕様  

体験終了時に、以下の2つの指標を算出します。

### 【衛生（Hygiene）】  
**計算式：**  
`衛生 = 1 - (不適切用途の使用量 ÷ 全使用量)`

- **不適切用途の使用量**：水質が80未満の状態で飲用に使用した水量の合計  
- **全使用量**：飲用・農業・廃棄を含めた水使用総量  

最終的に0〜1の値を0〜100スコアに変換し表示します。

---

### 【効率（Efficiency）】  
**計算式：**  
`効率 = (生活で使用した水量 ÷ 汲み上げた水量)`

- **生活で使用した水量**：飲用および農業に実際に使用した水量（廃棄を除く）  
- **汲み上げた水量**：井戸から取得した総水量  

効率スコアも0〜1を0〜100に変換して表示します。

──────────────────────────────  
## 操作仕様  

- **対応デバイス**：Meta Quest  
- **操作方式**：コントローラ操作（手で掴む／注ぐ動作）  
- **行動ごとの効果**：体力・水質・水量がイベントベースで変動  
- **入力方式**：Oculus SDK（XR Interaction Toolkit準拠）  

──────────────────────────────  
## UI仕様  

- 表示形式：HUD固定表示（視界上部に数値表示）  
- 表示項目：水量・水質・体力（各0〜100整数値）  
- 表示更新：行動イベント発生時のみ更新  
- 拡張案：手首UI（余裕があれば追加）  

──────────────────────────────  
## 技術構成  

| 項目 | 内容 |
|:--|:--|
| ゲームエンジン | Unity 6 |
| ビルドターゲット | Meta Quest（Androidビルド） |
| レンダリング | URP（軽量設定） |
| 物理挙動 | Obi Fluid（簡易流体表現） |
| 備考 | Meta Quest上では高度なCompute流体挙動は非対応のため、簡易表現に留めます。 |

──────────────────────────────  
## 留意事項  

- Meta Quest 実機上での動作を前提とした最適化を実施。  
- 流体表現・水質変化は教育用デモとして簡易実装とする。  
- 各数値は仮値（MVP段階）であり、実測またはユーザーテスト後に調整可能。  