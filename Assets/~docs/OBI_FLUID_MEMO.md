# Obi Fluid エミッター設定メモ

## ライフスパン（Lifespan）について

### 定義
- **ライフスパンは生成されたエフェクト（パーティクル）のライフタイム（寿命）を表す**
- 単位: 秒（seconds）
- 個々のパーティクルが存在し続ける時間を制御する
- エミッター自体が止まる時間ではない

### 動作
- パーティクルが生成されると、`lifespan`の値が設定される
- 時間経過とともに`lifespan`が減算される
- `lifespan <= 0`になると、パーティクルは無効化され、プールに戻る（再利用可能）

## エフェクトの生成量について

### エフェクトがどれだけ生成されるかは以下に依存する：

1. **BlueprintのCapacity（容量）**
   - `ObiFluidEmitterBlueprint`アセットの`Capacity`パラメータ
   - このエミッターが使用できる最大パーティクル数
   - デフォルト: 1000
   - パーティクルプールのサイズを決定

2. **Speed（エミッション速度）**
   - `ObiEmitter`コンポーネントの`Speed`パラメータ
   - 単位: メートル/秒（m/s）
   - エミッション速度が速いほど、より多くのパーティクルが生成される
   - `Speed = 0`にするとエミッションが停止する

### 計算式
```
生成されるパーティクル数 ≈ Speed × 時間 × エミッションポイント数
```

ただし、**Capacityの上限を超えることはできない**

## パフォーマンスに関する注意

### Capacityを大きすぎる値に設定すると：
- **メモリ使用量が増加する**
- **CPU負荷が高くなる**
- **フレームレートが低下する可能性がある**

### 推奨設定
- **短時間のテスト**: Capacity = 1000〜5000
- **通常の使用**: Capacity = 5000〜10000
- **長時間の連続エミッション**: Capacity = 10000〜20000
- **最大値**: Capacity = 50000（それ以上はパフォーマンスに深刻な影響）

### 最適化のヒント
- 必要最小限のCapacityに設定する
- `Speed`を調整して、必要な量のパーティクルを生成する
- `Lifespan`を適切に設定して、不要なパーティクルを早期にプールに戻す

## まとめ

- **Lifespan**: パーティクルの寿命（秒）
- **Capacity**: エミッターが使用できる最大パーティクル数
- **Speed**: エミッション速度（m/s）
- **生成量**: CapacityとSpeedに依存
- **パフォーマンス**: Capacityを大きすぎると重くなる

